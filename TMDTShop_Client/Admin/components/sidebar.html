<div class="sidebar bg-blue-800 text-white w-64 flex-shrink-0 flex flex-col">
    <div
        class="flex items-center justify-between p-4 border-b border-blue-700 sticky top-0 bg-blue-800 z-10 flex-shrink-0">
        <div class="flex items-center space-x-2 sidebar-header-text">
            <img data-image-keyword="logo" data-image-color="white"
                src="https://cdn-icons-png.flaticon.com/512/196/196566.png" class="h-8">
            <span class="text-xl font-bold">Quản trị ShopX</span>
        </div>
        <button id="sidebarToggle" class="text-white hover:text-blue-200">
            <i class="fas fa-bars"></i>
        </button>
    </div>

    <div class="p-4 flex-shrink-0">
        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center">
                <i class="fas fa-user-shield"></i>
            </div>
            <div class="sidebar-item-text">
                <p class="font-medium">Quản trị viên</p>
                <p class="text-xs text-blue-200">Quyền cao nhất</p>
            </div>
        </div>
    </div>

    <div class="flex-grow overflow-y-auto custom-scrollbar pb-4">
        <nav class="space-y-1 px-4">
            <a href="/Admin/" data-target="dashboard data-link"
                class="sidebar-item flex items-center space-x-3 p-3 rounded-lg bg-blue-700 text-white">
                <i class="far fa-chart-bar"></i>
                <span class="sidebar-item-text">Thống kê doanh thu</span>
            </a>
            <!-- người dùng -->
            <div class="sidebar-group">
                <div
                    class="flex items-center justify-between p-3 rounded-lg hover:bg-blue-700 cursor-pointer sidebar-group-toggle">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-user text-lg"></i>
                        <span class="sidebar-item-text">Người dùng</span>
                    </div>
                    <i class="fas fa-chevron-down text-sm sidebar-item-text transition-transform"></i>
                </div>
                <div class="sidebar-group-content pl-4">
                    <a href="/Admin/templates/user/list.html" class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i> Quản lý người dùng
                    </a>

                    <a href="/Admin/templates/user/create.html"
                        class="block p-3 pl-3 rounded hover:bg-blue-700 data-link"><i class="far fa-circle mr-2">
                        </i> Tạo mới người dùng
                    </a>
                </div>
            </div>
            <!-- Sản phẩm -->
            <div class="sidebar-group">
                <div
                    class="flex items-center justify-between p-3 rounded-lg hover:bg-blue-700 cursor-pointer sidebar-group-toggle">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-box"></i>
                        <span class="sidebar-item-text">Sản phẩm</span>
                    </div>
                    <i class="fas fa-chevron-down text-sm sidebar-item-text transition-transform"></i>
                </div>
                <div class="sidebar-group-content pl-4">
                    <a href="/Admin/templates/product/list.html" class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i>
                        Quản lý sản phẩm
                    </a>
                </div>
            </div>

            <!-- Danh mục -->
            <div class="sidebar-group">
                <div
                    class="flex items-center justify-between p-3 rounded-lg hover:bg-blue-700 cursor-pointer sidebar-group-toggle">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-list"></i>
                        <span class="sidebar-item-text">Danh mục</span>
                    </div>
                    <i class="fas fa-chevron-down text-sm sidebar-item-text transition-transform"></i>
                </div>
                <div class="sidebar-group-content pl-4">
                    <a href="/Admin/templates/category/list.html" class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i> Danh mục
                    </a>
                    <a href="/Admin/templates/category/create.html" class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i> Thêm danh mục
                    </a>
                </div>
            </div>

            <!-- Đơn hàng -->
            <div class="sidebar-group">
                <div
                    class="flex items-center justify-between p-3 rounded-lg hover:bg-blue-700 cursor-pointer sidebar-group-toggle relative">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-shopping-cart text-lg"></i>
                        <span
                            class="badge-collapsed absolute top-1 left-6 hidden bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full z-10"
                            data-count="150"></span>
                        <span class="sidebar-item-text ml-3 flex items-center space-x-2">
                            <span>Đơn hàng</span>
                            <span class="badge-expanded bg-red-500 text-white text-xs px-2 py-0.5 rounded-full"
                                data-count="150"></span>
                        </span>
                    </div>
                    <i class="fas fa-chevron-down text-sm sidebar-item-text transition-transform"></i>
                </div>
                <div class="sidebar-group-content pl-4">
                    <a href="/Admin/templates/order/list.html" class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i>Danh sách đơn hàng
                    </a>
                    <a href="/Admin/templates/order/list.html?status=CHO_XAC_NHAN"
                        class="block p-3 pl-3 rounded hover:bg-blue-700 flex items-center">
                        <i class="far fa-circle mr-2"></i>
                        Đơn hàng mới
                        <span id="badge-new-orders"
                            class="ml-2 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full hidden"></span>
                    </a>
                    <a href="/Admin/templates/order/list.html?status=DANG_XU_LY"
                        class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i> Đơn hàng đang xử lý
                    </a>
                </div>
            </div>

            <!-- Mã giảm giá -->
            <div class="sidebar-group">
                <div
                    class="flex items-center justify-between p-3 rounded-lg hover:bg-blue-700 cursor-pointer sidebar-group-toggle">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-ticket-alt text-lg"></i>
                        <span class="sidebar-item-text">Mã giảm giá</span>
                    </div>
                    <i class="fas fa-chevron-down text-sm sidebar-item-text transition-transform"></i>
                </div>
                <div class="sidebar-group-content pl-4">
                    <a href="/Admin/templates/discount/list.html" class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i> Quản lý Mã giảm giá
                    </a>

                    <a href="/Admin/templates/discount/create.html"
                        class="block p-3 pl-3 rounded hover:bg-blue-700 data-link"><i class="far fa-circle mr-2">
                        </i> Tạo mới mã giảm giá
                    </a>
                </div>
            </div>
            <!-- Thông báo -->
            <div class="sidebar-group">
                <div
                    class="flex items-center justify-between p-3 rounded-lg hover:bg-blue-700 cursor-pointer sidebar-group-toggle">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-bell"></i>
                        <span class="sidebar-item-text">Thông báo</span>
                    </div>
                    <i class="fas fa-chevron-down text-sm sidebar-item-text transition-transform"></i>
                </div>
                <div class="sidebar-group-content pl-4">
                    <a href="/Admin/templates/notification/list.html" class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i> Quản lý thông báo
                    </a>
                </div>
            </div>
            <!-- Liên hệ -->
            <div class="sidebar-group">
                <div
                    class="flex items-center justify-between p-3 rounded-lg hover:bg-blue-700 cursor-pointer sidebar-group-toggle">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-phone"></i>
                        <span class="sidebar-item-text">Liên hệ</span>
                    </div>
                    <i class="fas fa-chevron-down text-sm sidebar-item-text transition-transform"></i>
                </div>
                <div class="sidebar-group-content pl-4">
                    <a href="/Admin/templates/contact/list.html" class="block p-3 pl-3 rounded hover:bg-blue-700">
                        <i class="far fa-circle mr-2"></i> Quản lý liên hệ
                    </a>
                </div>
            </div>
        </nav>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const currentPath = window.location.pathname;
        const links = document.querySelectorAll("[data-link]");

        links.forEach(link => {
            const linkPath = new URL(link.href, window.location.origin).pathname;

            if (currentPath === linkPath) {
                const iconElement = link.querySelector("i");
                if (iconElement) {
                    iconElement.classList.replace("fa-circle", "fa-dot-circle");
                }
            }
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const groupToggles = document.querySelectorAll('.sidebar-group-toggle');

        groupToggles.forEach(toggle => {
            toggle.addEventListener('click', () => {
                // Ngăn chặn hành vi mặc định của link nếu có
                e.preventDefault();

                const content = toggle.nextElementSibling;
                const chevron = toggle.querySelector('.fa-chevron-down');

                if (content) {
                    // Toggle class hidden để ẩn/hiện nội dung con
                    content.classList.toggle('hidden');
                }

                if (chevron) {
                    // Toggle class rotate-180 để xoay icon
                    chevron.classList.toggle('rotate-180');
                }
            });
        });

    });
</script>