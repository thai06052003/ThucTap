<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Li√™n H·ªá - ShopX</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="icon" type="image/png" href="/Customer/assets/images/logo.jpg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body class="bg-gray-50 font-sans">
  <!-- Header Container -->
  <div id="header-container"></div>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    <!-- Contact Hero -->
    <section class="relative bg-gradient-to-r from-blue-600 to-indigo-700 py-20 mb-12 rounded-lg shadow-xl">
      <div class="container mx-auto px-4 text-center text-white">
        <h1 class="text-4xl md:text-5xl font-bold mb-4 animate-fade-in-down">Li√™n h·ªá v·ªõi ch√∫ng t√¥i</h1>
        <p class="text-lg md:text-xl animate-fade-in-up">M·ªçi th·∫Øc m·∫Øc v√† y√™u c·∫ßu h·ªó tr·ª£, vui l√≤ng li√™n h·ªá qua th√¥ng tin
          b√™n d∆∞·ªõi ho·∫∑c g·ª≠i tin nh·∫Øn cho ch√∫ng t√¥i.</p>
      </div>
    </section>

    <!-- Contact Content -->
    <section class="py-16 bg-white rounded-lg shadow-xl">
      <div class="container mx-auto px-4">
        <div class="flex flex-col lg:flex-row gap-12">
          <!-- Contact Form -->
          <div class="lg:w-2/3 xl:w-1/2">
            <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6">G·ª≠i tin nh·∫Øn cho ch√∫ng t√¥i</h2>
            <form id="contactForm" class="space-y-6">
              <div>
                <label for="contactMessage" class="block text-sm font-medium text-gray-700 mb-2">N·ªôi dung li√™n h·ªá <span
                    class="text-red-500">*</span></label>
                <textarea id="contactMessage" name="message" rows="6" required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-shadow shadow-sm"
                  placeholder="Nh·∫≠p n·ªôi dung b·∫°n mu·ªën g·ª≠i... (t·ªëi thi·ªÉu 10 k√Ω t·ª±)"></textarea>
                <p id="messageError" class="text-red-500 text-xs mt-1 hidden">N·ªôi dung ph·∫£i t·ª´ 10 ƒë·∫øn 2000 k√Ω t·ª±.</p>
              </div>
              <button type="submit" id="submitContactBtn"
                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                <i class="fas fa-paper-plane mr-2"></i>G·ª≠i tin nh·∫Øn
              </button>
              <div id="formFeedback" class="mt-4 text-sm"></div>
            </form>
          </div>

          <!-- Contact Info -->
          <div class="lg:w-1/3 xl:w-1/2 mt-12 lg:mt-0">
            <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6">Th√¥ng tin li√™n h·ªá</h2>
            <div class="space-y-6">
              <div class="flex items-start p-4 bg-indigo-50 rounded-lg shadow">
                <div class="bg-indigo-100 p-3 rounded-full mr-4 flex-shrink-0">
                  <i class="fas fa-map-marker-alt text-indigo-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-bold text-lg mb-1">ƒê·ªãa ch·ªâ c·ª≠a h√†ng</h3>
                  <p class="text-gray-600">11 L√Ω Th∆∞·ªùng Ki·ªát, P. Ph√∫ Nhu·∫≠n, TP. Hu·∫ø</p>
                </div>
              </div>

              <div class="flex items-start p-4 bg-indigo-50 rounded-lg shadow">
                <div class="bg-indigo-100 p-3 rounded-full mr-4 flex-shrink-0">
                  <i class="fas fa-phone-alt text-indigo-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-semibold text-lg text-gray-700 mb-1">ƒêi·ªán tho·∫°i</h3>
                  <p class="text-gray-600">1900 1234 (H·ªó tr·ª£ 24/7)</p>
                </div>
              </div>

              <div class="flex items-start p-4 bg-indigo-50 rounded-lg shadow">
                <div class="bg-indigo-100 p-3 rounded-full mr-4 flex-shrink-0">
                  <i class="fas fa-envelope text-indigo-600 text-xl"></i>
                </div>
                <div>
                  <h3 class="font-semibold text-lg text-gray-700 mb-1">Email</h3>
                  <p class="text-gray-600"><a href="mailto:support@shopx.vn"
                      class="hover:underline">support@shopx.vn</a></p>
                </div>
              </div>
            </div>

            <div class="mt-12">
              <h3 class="font-bold text-lg mb-4">Theo d√µi ch√∫ng t√¥i</h3>
              <div class="flex space-x-4">
                <a href="https://www.facebook.com/quocminh20" class="bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition">
                  <i class="fab fa-facebook-f"></i>
                </a>
                <a href="#" class="bg-pink-600 text-white p-3 rounded-full hover:bg-pink-700 transition">
                  <i class="fab fa-instagram"></i>
                </a>
                <a href="#" class="bg-blue-400 text-white p-3 rounded-full hover:bg-blue-500 transition">
                  <i class="fab fa-twitter"></i>
                </a>
                <a href="#" class="bg-red-600 text-white p-3 rounded-full hover:bg-red-700 transition">
                  <i class="fab fa-youtube"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer Container -->
  <div id="footer-container"></div>
  

  <!-- Chatbot -->

  <!-- Scripts -->
  <script src="../assets/js/index.js"></script>
  <script type="module" src="../assets/js/components.js"></script>
 
 

<!-- ‚úÖ 1. INTERCOM CONFIGURATION - BASED ON OFFICIAL SCRIPT -->
<script>
  // ‚úÖ Development Environment Detection
  const isDevelopment = window.location.hostname === 'localhost' || 
                       window.location.hostname === '127.0.0.1' ||
                       window.location.port === '5500';

  // ‚úÖ Get user info t·ª´ ShopX session TR∆Ø·ªöC KHI CONFIG
  function getUserForIntercom() {
    try {
      if (typeof getSession === 'function') {
        const token = getSession('token');
        const userInfo = getSession('userInfo');
        
        if (token && userInfo) {
          return {
            id: userInfo.userID || userInfo.userId || 'anonymous_' + Date.now(),
            name: userInfo.fullName || 'ShopX Customer',
            email: userInfo.email || null,
            createdAt: Math.floor(Date.now() / 1000), // Unix timestamp
            phone: userInfo.phone || null
          };
        }
      }
    } catch (error) {
      console.warn('Could not get user info for Intercom:', error);
    }
    
    // Fallback for anonymous users
    return {
      id: 'anonymous_' + Date.now(),
      name: 'Kh√°ch h√†ng ShopX',
      email: null,
      createdAt: Math.floor(Date.now() / 1000)
    };
  }

  // ‚úÖ Get user data
  const user = getUserForIntercom();

  // ‚úÖ Intercom Settings - THEO SCRIPT CH√çNH TH·ª®C
  window.intercomSettings = {
    api_base: "https://api-iam.intercom.io", // ‚úÖ GI·ªêNG SCRIPT G·ªêC
    app_id: "rk8if99h",
    user_id: user.id, // ‚úÖ THEO SCRIPT G·ªêC
    name: user.name, // ‚úÖ THEO SCRIPT G·ªêC  
    email: user.email, // ‚úÖ THEO SCRIPT G·ªêC
    created_at: user.createdAt, // ‚úÖ THEO SCRIPT G·ªêC
    
    // ‚úÖ Additional customization
    background_color: "#2563eb",
    action_color: "#2563eb", 
    language_override: "vi",
    
    // ‚úÖ KH√îNG ·∫®N LAUNCHER - ƒë·ªÉ Intercom t·ª± quy·∫øt ƒë·ªãnh
    // hide_default_launcher: false, // ‚úÖ EXPLICIT FALSE
    
    // ‚úÖ Custom attributes
    custom_attributes: {
      'customer_type': 'ShopX_Customer',
      'registration_source': 'Website',
      'website_section': 'Contact Page',
      'shopx_customer_id': user.id,
      'development_mode': isDevelopment
    }
  };

  console.log('‚úÖ Intercom settings configured:', {
    user_id: user.id,
    name: user.name,
    email: user.email,
    development: isDevelopment
  });
</script>

<!-- ‚úÖ 2. INTERCOM INSTALLATION - SCRIPT CH√çNH TH·ª®C T·ª™ INTERCOM -->
<script>
  // We pre-filled your app ID in the widget URL: 'https://widget.intercom.io/widget/rk8if99h'
  (function(){
    try {
      var w=window;
      var ic=w.Intercom;
      if(typeof ic==="function"){
        ic('reattach_activator');
        ic('update',w.intercomSettings);
      } else {
        var d=document;
        var i=function(){i.c(arguments);};
        i.q=[];
        i.c=function(args){i.q.push(args);};
        w.Intercom=i;
        var l=function(){
          var s=d.createElement('script');
          s.type='text/javascript';
          s.async=true;
          s.src='https://widget.intercom.io/widget/rk8if99h'; // ‚úÖ HARDCODED nh∆∞ script g·ªëc
          
          // ‚úÖ Error handling cho development
          s.onerror = function() {
            if (isDevelopment) {
              console.warn('‚ö†Ô∏è Intercom script failed to load (CORS in development)');
              setTimeout(createFallbackChat, 2000);
            } else {
              console.error('‚ùå Intercom script failed to load');
            }
          };
          
          s.onload = function() {
            console.log('‚úÖ Intercom script loaded successfully');
          };
          
          var x=d.getElementsByTagName('script')[0];
          x.parentNode.insertBefore(s,x);
        };
        
        if(document.readyState==='complete'){
          l();
        } else if(w.attachEvent){
          w.attachEvent('onload',l);
        } else {
          w.addEventListener('load',l,false);
        }
      }
    } catch (error) {
      console.warn('‚ö†Ô∏è Intercom initialization failed:', error);
      if (isDevelopment) {
        setTimeout(createFallbackChat, 2000);
      }
    }
  })();
</script>

<!-- ‚úÖ 3. INTERCOM INTEGRATION & FALLBACK -->
<script>
  (function() {
      'use strict';
      
      let intercomReady = false;
      
      // ‚úÖ Wait for Intercom to be ready
      function waitForIntercomReady() {
          if (typeof window.Intercom !== 'undefined' && window.Intercom.q) {
              // Intercom is loaded
              setTimeout(initializeIntercomIntegration, 1000);
          } else {
              setTimeout(waitForIntercomReady, 500);
          }
      }
      
      function initializeIntercomIntegration() {
          try {
              console.log('‚úÖ Initializing Intercom integration');
              
              // ‚úÖ Check if launcher appears
              setTimeout(function() {
                  const launcher = document.querySelector('.intercom-launcher');
                  if (launcher && launcher.style.display !== 'none') {
                      console.log('‚úÖ Intercom launcher detected');
                      intercomReady = true;
                      setupIntercomEvents();
                      injectCustomCSS();
                  } else {
                      console.warn('‚ö†Ô∏è Intercom launcher not found, creating fallback');
                      createFallbackChat();
                  }
              }, 3000);
              
          } catch (error) {
              console.warn('‚ö†Ô∏è Intercom integration error:', error);
              createFallbackChat();
          }
      }
      
      function setupIntercomEvents() {
          try {
              window.Intercom('onShow', function() {
                  console.log('üí¨ Intercom opened');
              });
              
              window.Intercom('onHide', function() {
                  console.log('üí¨ Intercom closed');
              });
              
              window.Intercom('onUnreadCountChanged', function(unreadCount) {
                  console.log('üì® Unread messages:', unreadCount);
              });
              
          } catch (error) {
              console.warn('Could not setup Intercom event listeners:', error);
          }
      }
      
      function injectCustomCSS() {
          const style = document.createElement('style');
          style.textContent = `
              .intercom-launcher {
                  background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%) !important;
                  box-shadow: 0 4px 14px 0 rgba(37, 99, 235, 0.4) !important;
                  transition: all 0.3s ease !important;
              }
              
              .intercom-launcher:hover {
                  transform: scale(1.1) !important;
                  box-shadow: 0 6px 20px 0 rgba(37, 99, 235, 0.6) !important;
              }
              
              .intercom-lightweight-app {
                  border-radius: 12px !important;
                  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1) !important;
              }
          `;
          document.head.appendChild(style);
      }
      
      // ‚úÖ Global fallback chat function
      window.createFallbackChat = function() {
          // Remove existing fallback
          const existing = document.getElementById('shopx-fallback-chat');
          if (existing) existing.remove();
          
          const fallbackHTML = `
              <div id="shopx-fallback-chat" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
                  <div id="fallback-launcher" 
                       style="background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%); 
                              width: 60px; height: 60px; border-radius: 50%; 
                              display: flex; align-items: center; justify-content: center; 
                              color: white; cursor: pointer; 
                              box-shadow: 0 4px 14px rgba(37, 99, 235, 0.4);
                              transition: all 0.3s ease;"
                       onclick="toggleFallbackWindow()"
                       onmouseover="this.style.transform='scale(1.1)'"
                       onmouseout="this.style.transform='scale(1)'">
                      <i class="fas fa-comments" style="font-size: 24px;"></i>
                  </div>
                  
                  <div id="fallback-window" 
                       style="position: absolute; bottom: 70px; right: 0; 
                              background: white; width: 350px; height: 450px; 
                              border-radius: 12px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); 
                              display: none; flex-direction: column; overflow: hidden;
                              border: 1px solid #e5e7eb;">
                      <!-- Header -->
                      <div style="background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%); 
                                  color: white; padding: 16px; display: flex; justify-content: space-between; 
                                  align-items: center;">
                          <div>
                              <h3 style="margin: 0; font-size: 16px; font-weight: bold;">
                                  <i class="fas fa-headset"></i> ShopX Support
                              </h3>
                              <p style="margin: 0; font-size: 12px; opacity: 0.9;">
                                  H·ªó tr·ª£ kh√°ch h√†ng 24/7
                              </p>
                          </div>
                          <button onclick="toggleFallbackWindow()" 
                                  style="background: none; border: none; color: white; 
                                         font-size: 18px; cursor: pointer;">
                              <i class="fas fa-times"></i>
                          </button>
                      </div>
                      
                      <!-- Content -->
                      <div style="flex: 1; padding: 20px; overflow-y: auto;">
                          <div style="background: #f3f4f6; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                              <p style="margin: 0; color: #374151; line-height: 1.5;">
                                  üëã Ch√†o b·∫°n! T√¥i l√† ShopX Support.<br><br>
                                  ${isDevelopment ? 'üöß <strong>Development Mode:</strong> Intercom ƒëang g·∫∑p v·∫•n ƒë·ªÅ.<br><br>' : ''}
                                  üí° <strong>B·∫°n c√≥ th·ªÉ li√™n h·ªá qua:</strong>
                              </p>
                          </div>
                          
                          <div onclick="scrollToContactForm()" 
                               style="background: #eff6ff; padding: 12px; border-radius: 8px; 
                                      cursor: pointer; margin-bottom: 8px; border-left: 4px solid #2563eb;">
                              <strong style="color: #2563eb;">üìù Form li√™n h·ªá</strong><br>
                              <small style="color: #6b7280;">G·ª≠i tin nh·∫Øn tr√™n trang n√†y</small>
                          </div>
                          
                          <div onclick="window.open('tel:19001234')" 
                               style="background: #f0fdf4; padding: 12px; border-radius: 8px; 
                                      cursor: pointer; margin-bottom: 8px; border-left: 4px solid #16a34a;">
                              <strong style="color: #16a34a;">üìû Hotline</strong><br>
                              <small style="color: #6b7280;">1900 1234 (24/7)</small>
                          </div>
                          
                          <div onclick="window.open('mailto:support@shopx.vn')" 
                               style="background: #fef7ff; padding: 12px; border-radius: 8px; 
                                      cursor: pointer; margin-bottom: 8px; border-left: 4px solid #a855f7;">
                              <strong style="color: #a855f7;">üìß Email</strong><br>
                              <small style="color: #6b7280;">support@shopx.vn</small>
                          </div>
                          
                          <div onclick="window.open('https://www.facebook.com/quocminh20')" 
                               style="background: #eff6ff; padding: 12px; border-radius: 8px; 
                                      cursor: pointer; border-left: 4px solid #1877f2;">
                              <strong style="color: #1877f2;">üì± Facebook</strong><br>
                              <small style="color: #6b7280;">Nh·∫Øn tin Facebook</small>
                          </div>
                      </div>
                  </div>
              </div>
          `;
          
          document.body.insertAdjacentHTML('beforeend', fallbackHTML);
          console.log('üîß Fallback chat created');
          
          // Global functions
          window.toggleFallbackWindow = function() {
              const window_el = document.getElementById('fallback-window');
              const launcher = document.getElementById('fallback-launcher');
              
              if (window_el.style.display === 'none') {
                  window_el.style.display = 'flex';
                  launcher.innerHTML = '<i class="fas fa-times" style="font-size: 24px;"></i>';
              } else {
                  window_el.style.display = 'none';
                  launcher.innerHTML = '<i class="fas fa-comments" style="font-size: 24px;"></i>';
              }
          };
          
          window.scrollToContactForm = function() {
              document.getElementById('contactForm').scrollIntoView({ 
                  behavior: 'smooth', 
                  block: 'center' 
              });
              setTimeout(() => {
                  document.getElementById('contactMessage').focus();
              }, 500);
              window.toggleFallbackWindow();
          };
      };
      
      // ‚úÖ Keyboard shortcut
      document.addEventListener('keydown', (e) => {
          if (e.ctrlKey && e.altKey && e.key === 'c') {
              e.preventDefault();
              if (intercomReady && typeof window.Intercom !== 'undefined') {
                  try {
                      window.Intercom('show');
                  } catch (error) {
                      window.toggleFallbackWindow();
                  }
              } else {
                  window.toggleFallbackWindow();
              }
          }
      });
      
      // ‚úÖ Initialize
      if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', waitForIntercomReady);
      } else {
          setTimeout(waitForIntercomReady, 1000);
      }
      
  })();
</script>

  <script>
    // ƒê·∫£m b·∫£o script n√†y ch·∫°y sau khi index.js v√† components.js ƒë√£ ƒë∆∞·ª£c load
    function initializeContactPage() {
      const contactForm = document.getElementById('contactForm');
      const contactMessageInput = document.getElementById('contactMessage');
      const messageErrorElement = document.getElementById('messageError');
      const submitButton = document.getElementById('submitContactBtn');
      const formFeedbackElement = document.getElementById('formFeedback');

      // Ki·ªÉm tra c√°c h√†m v√† bi·∫øn to√†n c·ª•c t·ª´ index.js
      if (typeof API_BASE_URL === 'undefined' || typeof getSession !== 'function' || typeof checkAuthTokenForPage !== 'function') {
        console.error("M·ªôt s·ªë h√†m ho·∫∑c bi·∫øn to√†n c·ª•c t·ª´ index.js ch∆∞a s·∫µn s√†ng. Trang li√™n h·ªá c√≥ th·ªÉ kh√¥ng ho·∫°t ƒë·ªông ƒë√∫ng.");
        formFeedbackElement.innerHTML = '<p class="text-red-600">L·ªói t·∫£i trang. Vui l√≤ng l√†m m·ªõi l·∫°i.</p>';
        if (submitButton) submitButton.disabled = true;
        return;
      }

      // Ki·ªÉm tra ƒëƒÉng nh·∫≠p khi trang t·∫£i
      if (!checkAuthTokenForPage()) {
        // checkAuthTokenForPage ƒë√£ x·ª≠ l√Ω chuy·ªÉn h∆∞·ªõng n·∫øu c·∫ßn
        // C√≥ th·ªÉ hi·ªÉn th·ªã th√¥ng b√°o y√™u c·∫ßu ƒëƒÉng nh·∫≠p n·∫øu mu·ªën
        formFeedbackElement.innerHTML = '<p class="text-yellow-600">Vui l√≤ng <a href="/Customer/templates/login.html" class="font-bold hover:underline">ƒëƒÉng nh·∫≠p</a> ƒë·ªÉ g·ª≠i li√™n h·ªá.</p>';
        if (submitButton) submitButton.disabled = true; // V√¥ hi·ªáu h√≥a n√∫t g·ª≠i n·∫øu ch∆∞a ƒëƒÉng nh·∫≠p
        return; // D·ª´ng ·ªü ƒë√¢y n·∫øu ch∆∞a ƒëƒÉng nh·∫≠p
      }


      if (contactForm && contactMessageInput && submitButton) {
        contactForm.addEventListener('submit', async function (event) {
          event.preventDefault();
          formFeedbackElement.innerHTML = ''; // X√≥a th√¥ng b√°o c≈©
          messageErrorElement.classList.add('hidden');

          const message = contactMessageInput.value.trim();

          // Validate message length
          if (message.length < 10 || message.length > 2000) {
            messageErrorElement.classList.remove('hidden');
            contactMessageInput.focus();
            return;
          }

          const token = getSession('token');
          if (!token) {
            formFeedbackElement.innerHTML = '<p class="text-red-600">L·ªói: B·∫°n ch∆∞a ƒëƒÉng nh·∫≠p ho·∫∑c phi√™n ƒë√£ h·∫øt h·∫°n. Vui l√≤ng <a href="/Customer/templates/login.html" class="font-bold hover:underline">ƒëƒÉng nh·∫≠p l·∫°i</a>.</p>';
            return;
          }

          const originalButtonText = submitButton.innerHTML;
          submitButton.disabled = true;
          submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>ƒêang g·ª≠i...';

          const contactData = {
            message: message
          };

          try {
            const response = await fetch(`${API_BASE_URL}/Contacts`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
              },
              body: JSON.stringify(contactData)
            });

            if (response.ok) {
              const result = await response.json(); // ContactDto
              formFeedbackElement.innerHTML = `<p class="text-green-600 font-semibold">Y√™u c·∫ßu li√™n h·ªá c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng! Ch√∫ng t√¥i s·∫Ω ph·∫£n h·ªìi s·ªõm nh·∫•t c√≥ th·ªÉ. (ID: ${result.contactID})</p>`;
              contactForm.reset(); // X√≥a form sau khi g·ª≠i th√†nh c√¥ng
            } else {
              const errorData = await response.json().catch(() => ({ message: "Kh√¥ng th·ªÉ g·ª≠i y√™u c·∫ßu. Vui l√≤ng th·ª≠ l·∫°i." }));
              let errorMessage = `L·ªói ${response.status}: ${errorData.message || "ƒê√£ c√≥ l·ªói x·∫£y ra."}`;
              if (response.status === 400 && errorData.errors) { // X·ª≠ l√Ω l·ªói validation chi ti·∫øt t·ª´ ASP.NET Core
                const validationErrors = Object.values(errorData.errors).flat().join('<br>');
                errorMessage = `L·ªói d·ªØ li·ªáu: <br>${validationErrors}`;
              } else if (response.status === 401) {
                errorMessage = "Phi√™n ƒëƒÉng nh·∫≠p kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ h·∫øt h·∫°n. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i.";
              }
              formFeedbackElement.innerHTML = `<p class="text-red-600">${errorMessage}</p>`;
            }
          } catch (error) {
            console.error('L·ªói khi g·ª≠i li√™n h·ªá:', error);
            formFeedbackElement.innerHTML = '<p class="text-red-600">ƒê√£ x·∫£y ra l·ªói k·∫øt n·ªëi m√°y ch·ªß. Vui l√≤ng th·ª≠ l·∫°i sau.</p>';
          } finally {
            submitButton.disabled = false;
            submitButton.innerHTML = originalButtonText;
          }
        });
      } else {
        console.error("Kh√¥ng t√¨m th·∫•y form li√™n h·ªá ho·∫∑c c√°c tr∆∞·ªùng c·∫ßn thi·∫øt.");
      }
    }

    // Ch·∫°y h√†m kh·ªüi t·∫°o sau khi DOM ƒë√£ s·∫µn s√†ng v√† c√°c script kh√°c ƒë√£ load
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeContactPage);
    } else {
      // DOMContentLoaded ƒë√£ x·∫£y ra, components.js c√≥ th·ªÉ v·∫´n ƒëang load
      setTimeout(initializeContactPage, 200); // Ch·ªù 200ms ƒë·ªÉ components load xong
    }
    
  </script>
</body>

</html>